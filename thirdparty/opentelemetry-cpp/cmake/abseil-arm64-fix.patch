--- a/third_party/abseil-cpp/absl/copts/copts.py
+++ b/third_party/abseil-cpp/absl/copts/copts.py
@@ -10,5 +10,10 @@ compilation options:

 The generated copts are consumed by configure_copts.bzl and
 AbseilConfigureCopts.cmake.
 """

+import sys
+import platform
+
+is_arm64 = platform.machine() in ('arm64', 'aarch64')
+
 # /Wall with msvc includes unhelpful warnings such as C4711, C4710, ...
@@ -148,4 +153,11 @@ COPT_VARS = {
     "ABSL_MSVC_LINKOPTS": [
         # Object file doesn't export any previously undefined symbols
         "-ignore:4221",
     ],
 }

+# Override X64 HWAES flags for ARM64 to prevent SSE4.1 compiler errors
+if is_arm64:
+    COPT_VARS["ABSL_RANDOM_HWAES_X64_FLAGS"] = []
